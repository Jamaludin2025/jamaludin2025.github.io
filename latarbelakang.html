<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Latar Belakang AJ Project</title>
  <style>
    body {
      margin: 0;
      min-height: 100vh;
      background: linear-gradient(135deg, #dbeafe, #eff6ff);
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding: 20px 20px;
      color: #333;
    }

    .container {
      background: #fff;
      max-width: 700px;
      padding: 40px 50px;
      border-radius: 12px;
      box-shadow: 0 15px 30px rgba(0, 0, 0, 0.25);
      line-height: 1.2;
      color: #222;
    }

    .container h1 {
      font-weight: 700;
      font-size: 2.2rem;
      margin-bottom: 10px;
      color: #1d4ed8;
      text-align: center;
    }

    .container p {
      font-size: 1.1rem;
      margin-bottom: 10px;
      text-align: justify;
      text-indent: 1.5em;
    }

    .container p strong {
      color: #1d4ed8;
    }

    .feedback-section {
      margin-top: 20px;
      padding-top: 15px;
      border-top: 1px solid #ddd;
      text-align: center;
    }

    .feedback-title {
      font-size: 1.2rem;
      font-weight: bold;
      margin-bottom: 10px;
      color: #1d4ed8;
    }

    .feedback-buttons {
      display: flex;
      justify-content: center;
      gap: 20px;
      flex-wrap: wrap;
      margin-bottom: 20px;
    }

    .btn {
      cursor: pointer;
      display: inline-block;
      padding: 10px 20px;
      font-size: 1rem;
      font-weight: bold;
      border-radius: 8px;
      color: white;
      border: none;
      transition: background-color 0.3s ease, transform 0.2s ease;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }

    .btn.continue {
      background-color: #1d4ed8;
    }

    .btn.continue:hover {
      background-color: #16a34a;
      transform: scale(1.05);
    }

    .btn.stop {
      background-color: #1d4ed8;
    }

    .btn.stop:hover {
      background-color: #ef4444;
      transform: scale(1.05);
    }

    .poll-bar-container {
      margin: 10px auto;
      max-width: 400px;
      text-align: left;
    }

    .poll-bar-label {
      font-weight: 600;
      margin-bottom: 5px;
      color: #1d4ed8;
    }

    .poll-bar {
      background-color: #ddd;
      border-radius: 10px;
      overflow: hidden;
      height: 25px;
      margin-bottom: 15px;
    }

    .poll-bar-fill {
      height: 100%;
      text-align: right;
      padding-right: 10px;
      color: white;
      font-weight: 700;
      line-height: 25px;
      border-radius: 10px;
    }

    .poll-bar-fill.continue {
      background-color: #16a34a;
    }

    .poll-bar-fill.stop {
      background-color: #ef4444;
    }

    #followup-buttons .btn {
      background-color: #1d4ed8;
    }

    #followup-buttons .btn:hover {
      background-color: #2563eb;
      transform: scale(1.05);
    }

    @media (max-width: 768px) {
      .container {
        padding: 30px 25px;
        max-width: 90%;
      }
      .container h1 {
        font-size: 1.2rem;
      }
      .container p {
        font-size: 0.7rem;
      }
      .feedback-title {
        font-size: 0.9rem;
      }
      .btn {
        padding: 6px 12px;
        font-size: 0.8rem;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Latar Belakang <br>Pembuatan AJ Project</h1>
    <p>Memasuki usia saya yang ke-20 tahun, saya mulai sering menerima undangan pernikahan dari kerabat maupun sahabat. Dari pengalaman tersebut, muncul sebuah ide dan inovasi untuk membuat sebuah proyek yang saya beri nama <strong>AJ Project</strong>. Proyek ini dirancang sebagai sistem pencatatan dan dokumentasi kehadiran saya di acara pernikahan, yang memuat informasi seperti nama pasangan pengantin, tanggal dan alamat acara, serta bentuk bingkisan yang saya berikan baik itu berupa barang maupun uang.</p>
    <p>Tujuan dari AJ Project ini adalah untuk memastikan bahwa pihak yang mengundang mengetahui kehadiran dan partisipasi saya dalam bentuk bingkisan ataupun uang, serta sebagai arsip pribadi dan cadangan untuk mengantisipasi permasalahan, seperti bingkisan yang hilang, tertukar, atau bingkisan yang tidak disertai dengan identitas pemberi.</p>
    <p>Sebelumnya saya juga ingin menyampaikan permohonan maaf kepada seluruh kerabat dan sahabat apabila saya belum sempat meminta izin secara langsung sebelum membuat proyek ini. Maka dari itu, apabila ada pihak yang merasa keberatan terkait pembuatan AJ Project ini atau punya saran masukkan untuk proyek ini, saya sangat terbuka untuk menerima saran dan siap berdiskusi demi kebaikan bersama.</p>

    <div class="feedback-section">
      <h2 class="feedback-title">Apa pendapat Anda tentang proyek ini?</h2>
      <div class="feedback-buttons">
        <button id="btn-continue" class="btn continue">Lanjutkan</button>
        <button id="btn-stop" class="btn stop">Hentikan</button>
      </div>

      <div class="poll-bar-container">
        <div class="poll-bar-label"></div>
        <div class="poll-bar">
          <div id="bar-continue" class="poll-bar-fill continue" style="width: 0%">0</div>
        </div>

        <div class="poll-bar-label"></div>
        <div class="poll-bar">
          <div id="bar-stop" class="poll-bar-fill stop" style="width: 0%">0</div>
        </div>
      </div>

      <div id="followup-buttons" style="display: none; margin-top: 15px;">
        <a id="link-feedback" class="btn" href="#" target="_blank">Kirim</a>
      </div>
    </div>
  </div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyBdt-2IQflUWNx3sdI1QHPMe1vAzsXAZcY",
      authDomain: "ajproject-log.firebaseapp.com",
      databaseURL: "https://ajproject-log-default-rtdb.firebaseio.com",
      projectId: "ajproject-log",
      storageBucket: "ajproject-log.appspot.com",
      messagingSenderId: "113688767697",
      appId: "1:113688767697:web:403ca2eb29084bf774a9f0",
      measurementId: "G-FXFWFFQX58"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    const pollingRef = db.ref('polling');

    const btnContinue = document.getElementById('btn-continue');
    const btnStop = document.getElementById('btn-stop');
    const barContinue = document.getElementById('bar-continue');
    const barStop = document.getElementById('bar-stop');
    const followupSection = document.getElementById('followup-buttons');
    const linkFeedback = document.getElementById('link-feedback');

    function updatePollUI(continueVotes, stopVotes) {
      const total = continueVotes + stopVotes;
      const continuePercent = total === 0 ? 0 : (continueVotes / total) * 100;
      const stopPercent = total === 0 ? 0 : (stopVotes / total) * 100;

      barContinue.style.width = continuePercent + '%';
      barContinue.textContent = continueVotes;

      barStop.style.width = stopPercent + '%';
      barStop.textContent = stopVotes;
    }

    pollingRef.on('value', (snapshot) => {
      const data = snapshot.val() || { continue: 0, stop: 0 };
      updatePollUI(data.continue || 0, data.stop || 0);
    });

    function vote(option) {
      const optionRef = pollingRef.child(option);
      optionRef.transaction(current => (current || 0) + 1);
    }

    function showFollowupButton(type) {
      followupSection.style.display = 'block';
      if (type === 'continue') {
        linkFeedback.textContent = 'Kirim Masukkan';
        linkFeedback.href = 'https://example.com/form-masukkan'; // Ganti URL
      } else if (type === 'stop') {
        linkFeedback.textContent = 'Kirim Alasan';
        linkFeedback.href = 'https://example.com/form-keberatan'; // Ganti URL
      }
    }

    btnContinue.addEventListener('click', () => {
      if (localStorage.getItem('voted')) {
        alert("Terima kasih, Anda sudah memberikan suara.");
        return;
      }
      vote('continue');
      localStorage.setItem('voted', 'true');
      showFollowupButton('continue');
    });

    btnStop.addEventListener('click', () => {
      if (localStorage.getItem('voted')) {
        alert("Terima kasih, Anda sudah memberikan suara.");
        return;
      }
      vote('stop');
      localStorage.setItem('voted', 'true');
      showFollowupButton('stop');
    });
  </script>
</body>
</html>
